{% extends 'page-organization.html' %}

{% block subtitle %}{{ c.page.title }}{% endblock %}
{% block pre_primary %}{% endblock %}

{% block primary %}
  <section class="module-content">

    {% block ckanext_pages_actions %}
      {% if h.check_access('ckanext_pages_update') %}
          {% asset 'pages/main-css' %}
          {% link_for _('Edit'), named_route='pages.edit', page=c.page.name, class_='btn btn-primary pull-right', icon='edit' %}
          {% link_for _('Revisions'), named_route='pages.pages_revisions', page=c.page.name, class_='btn btn-primary pull-right me-2', icon='eye' %}
      {% endif %}
    {% endblock %}
    <div class="rtds-grid rtds-gap-4 rtds-mt-8 rtds-mb-12">
      <h1 class="rtds-heading-1">{{ c.page.title }}</h1>
    </div>
      {% block ckanext_pages_content %}
        {% if c.page.content %}
          <div class="ckanext-pages-content rtds-container rtds-px-10 rtds-py-6">
            {% set editor = h.pages_get_wysiwyg_editor() %}
            <picture class="rtds-card__image-wrapper">
              <img class="rtds-card__image_ rtds-text-center rtds-h-full" alt="" src="{{ h.get_page_image(c.page.content) }}" />
            </picture>
            {% if editor %}
              <div>
                  {{c.page.content|safe}}
              </div>
            {% else %}
              {{ h.render_content(c.page.content) }}
            {% endif %}
          </div>
        {% else %}
          <p class="empty">{{ _('This page currently has no content') }}</p>
        {% endif %}

      {% endblock %}
  </section>
{% endblock %}

{% block secondary %}{% endblock %}
